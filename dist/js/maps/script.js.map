{"version":3,"sources":["script.js"],"names":["SpeechRecognizer","SpeechRecognition","webkitSpeechRecognition","recognition","$paper","document","getElementById","$paragraph","initRecognition","lang","setLanguage","interimResults","generateParagraph","addEventListener","handleRecognitionResult","handleFinishResult","startRecognition","start","stopRecognition","removeEventListener","stop","generateResult","results","result","map","transcript","join","event","innerHTML","deleteEmptyParagraphs","createElement","classList","add","appendChild","$paragraphs","querySelectorAll","p","length","removeChild","resetPaper","init","reset","$start","$stop","$reset","$eng","$pl"],"mappings":"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","file":"../script.js","sourcesContent":["// Speech recognition\nconst SpeechRecognizer = (function() {\n  const SpeechRecognition = SpeechRecognition || webkitSpeechRecognition;\n  var recognition = new SpeechRecognition();\n\n  // DOM\n  let $paper = document.getElementById(\"paper\");\n  let $paragraph;\n\n  // Funtions\n  let initRecognition = function(lang) {\n    lang = lang || \"en-US\";\n    setLanguage(lang);\n    recognition.interimResults = true;\n\n    generateParagraph();\n\n    recognition.addEventListener(\"result\", handleRecognitionResult);\n    recognition.addEventListener(\"end\", handleFinishResult);\n  };\n\n  let startRecognition = function() {\n    recognition.addEventListener(\"end\", handleFinishResult);\n    recognition.start();\n  };\n\n  let stopRecognition = function() {\n    recognition.removeEventListener(\"end\", handleFinishResult);\n    recognition.stop();\n  };\n\n  let setLanguage = function(lang) {\n    recognition.stop();\n    recognition.lang = lang;\n  };\n\n  let generateResult = function(results) {\n    let result = [...results].map(result => result[0].transcript).join(\"\");\n    return result;\n  };\n\n  let handleRecognitionResult = function(event) {\n    if (event.results) {\n      $paragraph.innerHTML = generateResult(event.results);\n    }\n  };\n\n  let handleFinishResult = function(event) {\n    generateParagraph();\n    recognition.start();\n  };\n\n  let generateParagraph = function() {\n    deleteEmptyParagraphs();\n    $paragraph = document.createElement(\"p\");\n    $paragraph.classList.add(\"paragraph\");\n    $paper.appendChild($paragraph);\n  };\n\n  let deleteEmptyParagraphs = function() {\n    let $paragraphs = [...document.querySelectorAll(\".paragraph\")];\n    for (let p of $paragraphs) {\n      if (p.innerHTML.length == 0) {\n        $paper.removeChild(p);\n      }\n    }\n  };\n\n  let resetPaper = function() {\n    $paper.innerHTML = \"\";\n    generateParagraph();\n  };\n\n  return {\n    init: initRecognition,\n    start: startRecognition,\n    stop: stopRecognition,\n    setLanguage,\n    reset: resetPaper\n  };\n})();\n\n// DOM from NAV\nlet $start = document.getElementById(\"start\");\nlet $stop = document.getElementById(\"stop\");\nlet $reset = document.getElementById(\"reset\");\nlet $eng = document.getElementById(\"lang_eng\");\nlet $pl = document.getElementById(\"lang_pl\");\n\n// Listeners\n$start.addEventListener(\"click\", SpeechRecognizer.start);\n$stop.addEventListener(\"click\", SpeechRecognizer.stop);\n$reset.addEventListener(\"click\", SpeechRecognizer.reset);\n$pl.addEventListener(\"click\", () => {\n  SpeechRecognizer.setLanguage(\"pl-PL\");\n});\n$eng.addEventListener(\"click\", () => {\n  SpeechRecognizer.setLanguage(\"en-US\");\n});\n\n//Init\nSpeechRecognizer.init(\"en-US\");\n"]}